---
import Layout from '/layouts/Layout.astro';
import ContractBoostCalculator from '/components/contract-boost-calculator';

const api = process.env.NEXT_PUBLIC_API_URL;
---

<Layout title="Contract Boost Calculator">
	<ContractBoostCalculator api={api} client:only="react" />
</Layout>

<style is:global>
	main {
		gap: 1rem;
	}

	.calculatorInput {
		display: flex;
		flex-direction: inherit;
	}

	.artifactSelect {
		display: flex;
		flex-direction: column;
	}

	#inputs {
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
		row-gap: 1rem;
	}

	#input-eid-artifacts {
		display: flex;
		flex-direction: column;
		gap: 1rem;
		& .spacer {
			flex: 1;
		}
		& > div,
		& button {
			width: min(100%, 12em);
		}
	}

	#input-stones {
		flex: 1;
		display: flex;
		flex-direction: column;
		gap: 1rem;

		& fieldset {
			display: flex;
			flex-direction: column;
			gap: 1rem;
			& div {
				display: flex;
				flex-direction: row;
				gap: 0.5em;
				width: fit-content;
				align-items: center;
			}
			& label {
				width: max-content;
			}
		}
	}

	#fetch-state {
		font-size: 70%;
		& span {
			margin-right: 0.5em;
		}
	}

	.spinner {
		display: inline-block;
		width: calc(1em / 1.414213);
		height: calc(1em / 1.414213);
		border-radius: 50%;
		border-top: 2px solid black;
		border-right: 2px solid transparent;
		box-sizing: border-box;
		animation: rotation 1s linear infinite;
	}

	@keyframes rotation {
		0% {
			transform: rotate(0deg);
		}
		100% {
			transform: rotate(360deg);
		}
	}

	#boostSets {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(min(15em, 100%), 1fr));
		gap: 1rem;
		& div {
			display: flex;
			flex-direction: row;
			gap: 0.5em;
			width: fit-content;
		}
		& label {
			width: max-content;
		}
	}

	#output {
		font-size: 120%;

		display: grid;
		grid-template-columns: max-content max-content;
		column-gap: 1rem;

		& :nth-child(odd) {
			justify-self: end;
		}

		& :nth-child(even) {
			justify-self: start;
		}

		& img {
			height: 1em;
		}
	}

	.error {
		color: red;
	}
</style>
